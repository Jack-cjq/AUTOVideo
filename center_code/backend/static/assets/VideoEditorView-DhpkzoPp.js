import{I as y,_ as ke,r as u,m as we,n as he,c,b as v,d as t,j as x,J as M,v as g,L as $,M as I,F as Z,p as ee,O as te,h as L,t as C,P as xe,Q as Me,N as se}from"./index-Cc1A4YXN.js";const _e=r=>y.post("/ai/copy/generate",r),Ce=()=>y.get("/ai/tts/voices"),le=r=>y.post("/ai/tts/synthesize",r),Ve=r=>y.post("/ai/subtitle/srt",r),Te=r=>y.post("/editor/edit_async",r),Se=r=>y.get(`/tasks/${r}`),$e=r=>{const V=new FormData;return V.append("file",r),y.post("/material/upload",V,{headers:{"Content-Type":"multipart/form-data"}})},Pt=r=>y.get("/materials",{params:r}),Rt=()=>y.post("/materials/clear",{confirm:!0}),Jt=(r,V,n=!1)=>y.post("/delete-material",{material_id:r,file_path:V,force:n}),Qt=()=>y.get("/outputs"),Kt=r=>y.post("/output/delete",{filename:r}),Ie={class:"video-editor-view"},Be={class:"tabs",style:{"max-width":"980px",margin:"0 auto 14px"}},Le={class:"panel",style:{"max-width":"980px",margin:"0 auto"}},He={class:"row"},Ae={class:"field"},Ue={class:"field"},je={class:"field"},Ee={class:"field",style:{"margin-top":"10px"}},Ne={style:{display:"flex",gap:"10px","flex-wrap":"wrap","margin-top":"10px"}},ze={key:0,class:"row",style:{"margin-top":"10px"}},Fe={class:"field"},Ge=["value"],Oe={class:"field",style:{"margin-top":"10px"}},qe={class:"panel",style:{"max-width":"980px",margin:"14px auto 0"}},De={class:"row"},Pe={class:"field"},Re=["value"],Je={class:"field"},Qe={style:{display:"flex",gap:"10px","flex-wrap":"wrap","margin-top":"10px"}},Ke={class:"edit-section"},We={class:"panel edit-panel"},Xe={class:"edit-row"},Ye={class:"edit-field full-width"},Ze={class:"field-label"},et={key:0,class:"label-badge"},tt={class:"edit-row",style:{"margin-top":"16px"}},st={class:"edit-field"},lt={class:"upload-btn"},it={class:"edit-section"},ot={class:"panel edit-panel"},at={class:"edit-row"},nt={class:"edit-field"},rt={class:"edit-field"},dt={class:"edit-row",style:{"margin-top":"16px","padding-top":"16px","border-top":"1px solid #f0f0f0"}},ut={class:"edit-field"},ct={class:"range-wrapper"},vt={class:"range-value"},pt={class:"edit-field"},mt={class:"edit-section"},ft={class:"panel edit-panel"},bt={class:"edit-row"},gt={class:"edit-field"},yt={class:"edit-field"},kt={class:"edit-field"},wt={class:"edit-row",style:{"margin-top":"16px","padding-top":"16px","border-top":"1px solid #f0f0f0"}},ht={class:"edit-field full-width"},xt={class:"subtitle-options"},Mt={class:"checkbox-label"},_t={class:"subtitle-actions"},Ct=["href"],Vt={class:"edit-section"},Tt={class:"panel edit-panel generate-panel"},St={class:"generate-content"},$t=["disabled"],It={key:0,class:"btn-icon",viewBox:"0 0 24 24",fill:"none"},Bt={key:1,class:"spinner"},Lt={key:0,class:"progress-wrapper"},Ht={class:"progress-info"},At={class:"progress-text"},Ut={class:"progress-percent"},jt={class:"progress-bar"},Et={class:"panel",style:{"max-width":"980px",margin:"14px auto 0"}},Nt=["src"],zt={key:1,class:"preview-video",style:{display:"flex","align-items":"center","justify-content":"center",color:"#999"}},Ft={style:{display:"flex",gap:"10px","flex-wrap":"wrap","margin-top":"10px"}},Gt=["href"],Ot={__name:"VideoEditorView",props:{materials:{type:Array,default:()=>[]},timeline:{type:Object,default:()=>({clips:[],voice:null,bgm:null,global:{speed:1}})}},emits:["update-timeline","generate","open-outputs","refresh-materials","preview-audio"],setup(r,{emit:V}){const n=r,k=V,w=u("copy"),N=u(!1),z=u(!1),_=u(!1),d=u({theme:"",keywords:"",reference:"",count:6,output:""}),T=u([]),S=u(0),F=u([{id:0,name:"标准女声"},{id:1,name:"标准男声"},{id:3,name:"度逍遥（情感男声）"},{id:4,name:"度丫丫（童声）"}]),H=u({voice:0}),m=u({bgmVolume:60,bgmLoop:"auto",resolution:"auto",ratio:"auto",speed:1,subtitleEnabled:!1}),A=u(""),G=u(""),B=u(""),h=u({show:!1,value:0,text:""}),O=u(null),q=u(null),D=u(null),U=u(null);function P(l){const e=n.materials.find(i=>i.id===l);return e?e.name||`素材(${l})`:`素材(${l})`}function R(l){const e=document.createElement("div");return e.textContent=l,e.innerHTML}function J(l=500){return(d.value.output||"").slice(0,l)}async function ie(){var l;if(!d.value.theme.trim()){alert("请输入主题");return}N.value=!0;try{const e=await _e({theme:d.value.theme,keywords:d.value.keywords,reference:d.value.reference,count:d.value.count});if(e.code===200){const i=((l=e.data)==null?void 0:l.copies)||[];i.length>0?(T.value=i.map((o,s)=>({title:o.title||`文案 ${s+1}`,text:Array.isArray(o.lines)?o.lines.join(`
`):""})),S.value=0,K(),alert("已生成文案（DeepSeek）")):alert("AI 返回空结果")}else alert(`生成失败：${e.message||"未知错误"}`)}catch(e){alert(`生成失败：${e.message}`)}finally{N.value=!1}}function K(){var l;T.value.length>0&&S.value>=0&&(d.value.output=((l=T.value[S.value])==null?void 0:l.text)||"")}function oe(){d.value={theme:"",keywords:"",reference:"",count:6,output:""},T.value=[],S.value=0,alert("已清空")}async function ae(){try{await navigator.clipboard.writeText(d.value.output||""),alert("已复制到剪贴板")}catch{alert("复制失败，请手动选择复制")}}async function ne(){var e;const l=J(500);if(!l){alert("请先生成/填写文案（用于试听）");return}try{alert("试听中…");const i=await le({text:l,voice:H.value.voice,speed:5,pitch:5,volume:6,persist:!1});if(i.code===200){const o=(e=i.data)==null?void 0:e.preview_url;o?k("preview-audio",o):alert("缺少 preview_url")}else alert(`TTS失败：${i.message||"未知错误"}`)}catch(i){alert(`TTS失败：${i.message}`)}}async function re(){var e;const l=J(500);if(!l){alert("请先生成/填写文案（用于配音）");return}z.value=!0;try{const i=await le({text:l,voice:H.value.voice,speed:5,pitch:5,volume:6,persist:!0});if(i.code===200){const o=(e=i.data)==null?void 0:e.material_id;if(o){const s={...n.timeline};s.voice={materialId:Number(o)},k("update-timeline",s),alert("已生成并加入素材库，已设为配音"),k("refresh-materials")}else alert("入库失败（未返回 material_id）")}else alert(`生成失败：${i.message||"未知错误"}`)}catch(i){alert(`生成失败：${i.message}`)}finally{z.value=!1}}function de(l){alert("自定义音色上传功能待实现")}async function ue(l){var i,o;const e=(i=l.target.files)==null?void 0:i[0];if(e)try{alert("正在上传并添加到剪辑轨道…");const s=await $e(e);if(s.code===200){const a=(o=s.data)==null?void 0:o.material_id;if(a){const p={...n.timeline};p.clips||(p.clips=[]);const f=`${Date.now()}_${Math.random().toString(16).slice(2)}`;p.clips.push({id:f,materialId:Number(a)}),k("update-timeline",p),alert("上传成功，已加入剪辑轨道"),k("refresh-materials")}}else alert(`上传失败：${s.message||"未知错误"}`)}catch(s){alert(`上传失败：${s.message}`)}finally{l.target.value=""}}function ce(){alert("AI生成（占位）：后续可接入生成式视频/检索素材。")}async function ve(){var i,o,s;const l=(o=(i=n.timeline)==null?void 0:i.voice)==null?void 0:o.materialId;if(!l){alert("请先生成配音并设为配音轨（用于取时长）");return}const e=J(500);if(!e){alert("请先生成/填写文案（用于字幕）");return}try{const a=await Ve({text:e,audio_material_id:l});if(a.code===200){const p=(s=a.data)==null?void 0:s.preview_url;p?(B.value=p,alert("字幕已生成，可点击下载SRT")):alert("缺少字幕预览链接")}else alert(`字幕生成失败：${a.message||"未知错误"}`)}catch(a){alert(`字幕生成失败：${a.message}`)}}async function pe(){var e,i,o,s,a,p;const l=((e=n.timeline)==null?void 0:e.clips)||[];if(l.length===0){alert("请至少选择一个视频素材");return}_.value=!0,h.value={show:!0,value:0,text:"正在创建任务…"};try{const f=l.map(E=>E.materialId),b=((o=(i=n.timeline)==null?void 0:i.voice)==null?void 0:o.materialId)||null,be=((a=(s=n.timeline)==null?void 0:s.bgm)==null?void 0:a.materialId)||null,ge=m.value.speed||1,ye=m.value.subtitleEnabled&&B.value?B.value:null,Q=await Te({video_ids:f,voice_id:b,bgm_id:be,speed:ge,subtitle_path:ye});if(Q.code===200){const E=(p=Q.data)==null?void 0:p.task_id;if(E)h.value={show:!0,value:10,text:"任务已创建，正在处理…"},me(E);else throw new Error("未返回 task_id")}else throw new Error(Q.message||"创建任务失败")}catch(f){alert(`生成失败：${f.message}`),h.value={show:!1,value:0,text:""}}finally{_.value=!1}}async function me(l){let i=0;const o=async()=>{if(i>=300){h.value={show:!1,value:0,text:"任务超时"};return}try{const s=await Se(l);if(s.code===200){const a=s.data;h.value={show:!0,value:a.progress||0,text:a.status==="running"?"正在处理…":a.status==="success"?"处理完成":a.error_message||""},a.status==="success"?(a.preview_url&&(A.value=a.preview_url,G.value=a.preview_url),h.value={show:!1,value:100,text:"完成"},alert("剪辑完成！"),k("refresh-outputs")):a.status==="fail"?(h.value={show:!1,value:0,text:a.error_message||"处理失败"},alert(`剪辑失败：${a.error_message||"未知错误"}`)):(i++,setTimeout(o,1e3))}else i++,setTimeout(o,1e3)}catch{i++,setTimeout(o,1e3)}};o()}function fe(){if(U.value)try{U.value.requestFullscreen&&U.value.requestFullscreen()}catch{}}function W(){var i;if(!O.value)return;const l=O.value;l.innerHTML="";const e=((i=n.timeline)==null?void 0:i.clips)||[];if(!e.length){l.innerHTML='<div class="empty-state"><svg class="empty-icon" viewBox="0 0 24 24" fill="none"><path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><div class="empty-text">尚未选择视频素材</div><div class="empty-hint">去"云素材库 → 视频素材库"点击"添加到剪辑轨道"来选择素材</div></div>';return}e.forEach((o,s)=>{const a=P(o.materialId),p=document.createElement("div");p.className="chip",p.innerHTML=`
      <b>${s+1}</b>
      <span>${R(a)}</span>
      <button class="x" title="上移" data-action="up">↑</button>
      <button class="x" title="下移" data-action="down">↓</button>
      <button class="x" title="移除" data-action="remove">×</button>
    `,p.querySelector('[data-action="up"]').onclick=()=>{if(s<=0)return;const f={...n.timeline},b=f.clips;[b[s-1],b[s]]=[b[s],b[s-1]],k("update-timeline",f)},p.querySelector('[data-action="down"]').onclick=()=>{const f={...n.timeline},b=f.clips;s>=b.length-1||([b[s],b[s+1]]=[b[s+1],b[s]],k("update-timeline",f))},p.querySelector('[data-action="remove"]').onclick=()=>{const f={...n.timeline};f.clips=f.clips.filter(b=>b.id!==o.id),k("update-timeline",f)},l.appendChild(p)})}function X(){var s;if(!D.value)return;const l=D.value;l.innerHTML="";const e=(s=n.timeline)==null?void 0:s.bgm;if(!e){l.innerHTML='<div class="label">未选择 BGM（可不选）。</div>';return}const i=P(e.materialId),o=document.createElement("div");o.className="chip",o.innerHTML=`<b>BGM</b><span>${R(i)}</span><button class="x" title="移除">×</button>`,o.querySelector(".x").onclick=()=>{const a={...n.timeline};a.bgm=null,k("update-timeline",a)},l.appendChild(o)}function Y(){var s;if(!q.value)return;const l=q.value;l.innerHTML="";const e=(s=n.timeline)==null?void 0:s.voice;if(!e){l.innerHTML='<div class="label">未选择配音（可不选）。</div>';return}const i=P(e.materialId),o=document.createElement("div");o.className="chip",o.innerHTML=`<b>配音</b><span>${R(i)}</span><button class="x" title="移除">×</button>`,o.querySelector(".x").onclick=()=>{const a={...n.timeline};a.voice=null,k("update-timeline",a)},l.appendChild(o)}function j(l){w.value=l,localStorage.setItem("ve.aiTab",l),se(()=>{l==="edit"&&(W(),X(),Y())})}return we(()=>n.timeline,()=>{w.value==="edit"&&se(()=>{W(),X(),Y()})},{deep:!0}),he(()=>{const l=localStorage.getItem("ve.aiTab")||"copy";j(l),Ce().then(e=>{e.code===200&&(F.value=e.data||F.value)}).catch(()=>{})}),(l,e)=>{var i,o;return v(),c("div",Ie,[t("div",Be,[t("div",{class:M(["tab",{active:w.value==="copy"}]),onClick:e[0]||(e[0]=s=>j("copy"))}," 文案 ",2),t("div",{class:M(["tab",{active:w.value==="tts"}]),onClick:e[1]||(e[1]=s=>j("tts"))}," 配音 ",2),t("div",{class:M(["tab",{active:w.value==="edit"}]),onClick:e[2]||(e[2]=s=>j("edit"))}," 剪辑生成 ",2)]),w.value==="copy"?(v(),c("div",{key:0,class:M(["aiStep",{active:w.value==="copy"}])},[t("div",Le,[t("div",He,[t("div",Ae,[e[17]||(e[17]=t("div",{class:"label"},"AI文案生成：主题",-1)),g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>d.value.theme=s),class:"input",placeholder:"例如：冬日城市漫游 / 美食探店 / 旅行Vlog"},null,512),[[$,d.value.theme]])]),t("div",Ue,[e[18]||(e[18]=t("div",{class:"label"},"关键词（可选）",-1)),g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>d.value.keywords=s),class:"input",placeholder:"例如：温暖、治愈、街景、镜头感…"},null,512),[[$,d.value.keywords]])]),t("div",je,[e[19]||(e[19]=t("div",{class:"label"},"生成数量（1~10）",-1)),g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>d.value.count=s),class:"input",type:"number",min:"1",max:"10"},null,512),[[$,d.value.count,void 0,{number:!0}]])])]),t("div",Ee,[e[20]||(e[20]=t("div",{class:"label"},"参考文案（可选）",-1)),g(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>d.value.reference=s),class:"textarea",placeholder:"粘贴一段参考文案（当前为本地模板生成演示）。"},null,512),[[$,d.value.reference]])]),t("div",Ne,[t("button",{class:M(["btn primary",{loading:N.value}]),onClick:ie},[...e[21]||(e[21]=[t("span",{class:"spinner"},null,-1),t("span",null,"生成",-1)])],2),t("button",{class:"btn",onClick:oe},[...e[22]||(e[22]=[t("span",null,"清空",-1)])]),t("button",{class:"btn",onClick:ae},[...e[23]||(e[23]=[t("span",null,"复制",-1)])])]),T.value.length>0?(v(),c("div",ze,[t("div",Fe,[e[24]||(e[24]=t("div",{class:"label"},"选择文案版本",-1)),g(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>S.value=s),class:"select",onChange:K},[(v(!0),c(Z,null,ee(T.value,(s,a)=>(v(),c("option",{key:a,value:a},C(s.title),9,Ge))),128))],544),[[I,S.value]])])])):x("",!0),t("div",Oe,[e[25]||(e[25]=t("div",{class:"label"},"文案预览/编辑",-1)),g(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>d.value.output=s),class:"textarea",placeholder:"生成的文案会出现在这里，你也可以直接编辑。"},null,512),[[$,d.value.output]])])])],2)):x("",!0),w.value==="tts"?(v(),c("div",{key:1,class:M(["aiStep",{active:w.value==="tts"}])},[t("div",qe,[t("div",De,[t("div",Pe,[e[26]||(e[26]=t("div",{class:"label"},"音色选择",-1)),g(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>H.value.voice=s),class:"select"},[(v(!0),c(Z,null,ee(F.value,s=>(v(),c("option",{key:s.id,value:s.id},C(s.name),9,Re))),128))],512),[[I,H.value.voice]])]),t("div",Je,[e[27]||(e[27]=t("div",{class:"label"},"自定义音色上传（演示）",-1)),t("input",{class:"input",type:"file",accept:"audio/*",onChange:de},null,32)])]),t("div",Qe,[t("button",{class:"btn",onClick:ne},[...e[28]||(e[28]=[t("span",null,"试听",-1)])]),t("button",{class:M(["btn primary",{loading:z.value}]),onClick:re},[...e[29]||(e[29]=[t("span",{class:"spinner"},null,-1),t("span",null,"生成并加入素材库",-1)])],2)]),e[30]||(e[30]=t("div",{class:"label",style:{"margin-top":"8px"}},' 说明：试听仅用于预览；"生成并加入素材库"会把音频写入音频素材库并自动设为配音轨。 ',-1))])],2)):x("",!0),w.value==="edit"?(v(),c("div",{key:2,class:M(["aiStep",{active:w.value==="edit"}])},[t("div",Ke,[e[38]||(e[38]=te('<div class="section-header" data-v-4dc3f472><div class="section-title" data-v-4dc3f472><svg class="section-icon" viewBox="0 0 24 24" fill="none" data-v-4dc3f472><path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4dc3f472></path></svg><span data-v-4dc3f472>视频素材</span></div><div class="section-hint" data-v-4dc3f472>从云素材库选择或本地上传</div></div>',1)),t("div",We,[t("div",Xe,[t("div",Ye,[t("div",Ze,[e[31]||(e[31]=L(" 已选视频素材 ",-1)),(((i=n.timeline)==null?void 0:i.clips)||[]).length>0?(v(),c("span",et,C((((o=n.timeline)==null?void 0:o.clips)||[]).length)+" 个 ",1)):x("",!0)]),t("div",{class:"chip-list",ref_key:"selectedVideos",ref:O},null,512),e[32]||(e[32]=t("div",{class:"field-hint"},[t("svg",{class:"hint-icon",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 16v-4M12 8h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"})]),t("span",null,[t("strong",null,"说明："),L('这里显示您选择的视频素材，将按顺序拼接成最终视频。 可通过 ↑↓ 调整顺序，× 删除素材。 去"云素材库 → 视频素材库"点击"添加到剪辑轨道"来选择素材。 ')])],-1))])]),t("div",tt,[t("div",st,[e[35]||(e[35]=t("div",{class:"field-label"},"本地上传",-1)),t("label",lt,[t("input",{type:"file",accept:".mp4,.avi,.mov",onChange:ue,style:{display:"none"}},null,32),e[33]||(e[33]=t("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e[34]||(e[34]=t("span",null,"选择视频文件",-1))])]),t("div",{class:"edit-field"},[e[37]||(e[37]=t("div",{class:"field-label"},"AI生成（占位）",-1)),t("button",{class:"btn btn-secondary",onClick:ce},[...e[36]||(e[36]=[t("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),t("span",null,"AI生成",-1)])])])])])]),t("div",it,[e[46]||(e[46]=t("div",{class:"section-header"},[t("div",{class:"section-title"},[t("svg",{class:"section-icon",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M11 5L6 9H2v6h4l5 4V5zM19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),t("span",null,"音频配置")])],-1)),t("div",ot,[t("div",at,[t("div",nt,[e[39]||(e[39]=t("div",{class:"field-label"},"配音",-1)),t("div",{class:"chip-list",ref_key:"selectedVoice",ref:q},null,512),e[40]||(e[40]=t("div",{class:"field-hint"},[t("svg",{class:"hint-icon",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 16v-4M12 8h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"})]),L(' 在"配音"模块生成并加入素材库会自动设为配音轨 ')],-1))]),t("div",rt,[e[41]||(e[41]=t("div",{class:"field-label"},"BGM",-1)),t("div",{class:"chip-list",ref_key:"selectedBgm",ref:D},null,512),e[42]||(e[42]=t("div",{class:"field-hint"},[t("svg",{class:"hint-icon",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 16v-4M12 8h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"})]),L(' 去"云素材库 → BGM库"点击"添加到剪辑轨道" ')],-1))])]),t("div",dt,[t("div",ut,[e[43]||(e[43]=t("div",{class:"field-label"},"BGM 音量",-1)),t("div",ct,[g(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>m.value.bgmVolume=s),class:"range-input",type:"range",min:"0",max:"100"},null,512),[[$,m.value.bgmVolume,void 0,{number:!0}]]),t("span",vt,C(m.value.bgmVolume)+"%",1)])]),t("div",pt,[e[45]||(e[45]=t("div",{class:"field-label"},"BGM 循环",-1)),g(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>m.value.bgmLoop=s),class:"select"},[...e[44]||(e[44]=[t("option",{value:"auto"},"按视频长度截断",-1),t("option",{value:"loop"},"循环（后端未实现）",-1)])],512),[[I,m.value.bgmLoop]])])])])]),t("div",mt,[e[57]||(e[57]=te('<div class="section-header" data-v-4dc3f472><div class="section-title" data-v-4dc3f472><svg class="section-icon" viewBox="0 0 24 24" fill="none" data-v-4dc3f472><path d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4dc3f472></path><rect x="2" y="6" width="20" height="12" rx="2" stroke="currentColor" stroke-width="2" data-v-4dc3f472></rect></svg><span data-v-4dc3f472>输出设置</span></div></div>',1)),t("div",ft,[t("div",bt,[t("div",gt,[e[48]||(e[48]=t("div",{class:"field-label"},"分辨率",-1)),g(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>m.value.resolution=s),class:"select"},[...e[47]||(e[47]=[t("option",{value:"auto"},"自动",-1),t("option",{value:"1080p"},"1080p",-1),t("option",{value:"720p"},"720p",-1)])],512),[[I,m.value.resolution]])]),t("div",yt,[e[50]||(e[50]=t("div",{class:"field-label"},"视频比例",-1)),g(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>m.value.ratio=s),class:"select"},[...e[49]||(e[49]=[t("option",{value:"auto"},"自动",-1),t("option",{value:"16:9"},"16:9",-1),t("option",{value:"9:16"},"9:16",-1),t("option",{value:"1:1"},"1:1",-1)])],512),[[I,m.value.ratio]])]),t("div",kt,[e[52]||(e[52]=t("div",{class:"field-label"},"播放速度",-1)),g(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>m.value.speed=s),class:"select"},[...e[51]||(e[51]=[t("option",{value:1},"1.0x",-1),t("option",{value:.75},"0.75x",-1),t("option",{value:1.25},"1.25x",-1),t("option",{value:1.5},"1.5x",-1),t("option",{value:2},"2.0x",-1)])],512),[[I,m.value.speed,void 0,{number:!0}]])])]),t("div",wt,[t("div",ht,[e[56]||(e[56]=t("div",{class:"field-label"},"字幕设置",-1)),t("div",xt,[t("label",Mt,[g(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>m.value.subtitleEnabled=s),type:"checkbox",class:"checkbox-input"},null,512),[[xe,m.value.subtitleEnabled]]),e[53]||(e[53]=t("span",{class:"checkbox-text"},"生成并烧录字幕（需要已选择配音音频）",-1))]),t("div",_t,[t("button",{class:"btn btn-secondary",onClick:ve,type:"button"},[...e[54]||(e[54]=[t("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M14 2v6h6M16 13H8M16 17H8M10 9H8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),t("span",null,"生成字幕预览",-1)])]),B.value?(v(),c("a",{key:0,class:"btn btn-secondary",href:B.value,target:"_blank"},[...e[55]||(e[55]=[t("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),t("span",null,"下载SRT",-1)])],8,Ct)):x("",!0)])])])])])]),t("div",Vt,[t("div",Tt,[t("div",St,[t("button",{class:M(["btn btn-generate",{loading:_.value}]),onClick:pe,disabled:_.value},[_.value?x("",!0):(v(),c("svg",It,[...e[58]||(e[58]=[t("path",{d:"M5 12h14M12 5l7 7-7 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),_.value?(v(),c("span",Bt)):x("",!0),t("span",null,C(_.value?"正在生成中...":"一键生成AI剪辑视频"),1)],10,$t),h.value.show?(v(),c("div",Lt,[t("div",Ht,[t("span",At,C(h.value.text||"处理中..."),1),t("span",Ut,C(Math.round(h.value.value))+"%",1)]),t("div",jt,[t("div",{class:"progress-fill",style:Me({width:`${Math.min(100,Math.max(0,h.value.value))}%`})},null,4)])])):x("",!0)])])]),t("div",Et,[e[60]||(e[60]=t("div",{class:"label",style:{"margin-bottom":"8px"}},"视频预览区（生成中/已生成）",-1)),A.value?(v(),c("video",{key:0,ref_key:"previewVideo",ref:U,class:"preview-video",controls:""},[t("source",{src:A.value,type:"video/mp4"},null,8,Nt),e[59]||(e[59]=L(" 您的浏览器不支持HTML5视频播放，请更换浏览器后重试 ",-1))],512)):(v(),c("div",zt," 暂无预览视频 ")),t("div",Ft,[G.value?(v(),c("a",{key:0,class:"btn",href:G.value,target:"_blank"}," 导出/下载 ",8,Gt)):x("",!0),A.value?(v(),c("button",{key:1,class:"btn",onClick:fe}," 全屏 ")):x("",!0),t("button",{class:"btn",onClick:e[16]||(e[16]=s=>l.$emit("open-outputs"))}," 查看成品库 ")])])],2)):x("",!0)])}}},qt=ke(Ot,[["__scopeId","data-v-4dc3f472"]]),Wt=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));export{qt as V,Qt as a,Jt as b,Rt as c,Kt as d,Wt as e,Pt as g,$e as u};
