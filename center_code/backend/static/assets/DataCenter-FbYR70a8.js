import{g as F,a as I}from"./dataCenter-CCaux0Tx.js";import{_ as N,r as _,n as U,c as V,b as f,e,w as l,f as c,k as L,E as M,s as O,d as t,F as J,p as T,i as C,h as b,t as n,v as j,J as q}from"./index-Cc1A4YXN.js";const G={class:"data-center-page"},H={class:"filters"},K={class:"stats-cards"},P={class:"stat-value"},Q={class:"stat-value"},W={class:"stat-value"},X={class:"stat-value"},Y={class:"stat-value"},Z={class:"stat-value"},$={class:"stat-value"},aa={class:"stat-value"},ea={__name:"DataCenter",setup(ta){const h=_(!1),m=_(!1),d=_({}),g=_([]),y=_([]),v=_([]),u=_({platform:"",account_id:null}),S=async()=>{try{m.value=!0;const o={platform:u.value.platform||void 0},a=await I(o);a.code===200&&(g.value=a.data)}catch(o){console.error("加载账号明细失败",o)}finally{m.value=!1}},w=async()=>{try{h.value=!0;const o={platform:u.value.platform||void 0,account_id:u.value.account_id||void 0};v.value&&v.value.length===2&&(o.start_date=v.value[0].toISOString(),o.end_date=v.value[1].toISOString());const a=await F(o);a.code===200&&(d.value=a.data),S()}catch(o){M.error("加载统计数据失败"),console.error(o)}finally{h.value=!1}},A=async()=>{var o;try{const a=await L.accounts.list({limit:1e3});if(a&&a.code===200){const p=((o=a.data)==null?void 0:o.accounts)||a.data||[];y.value=Array.isArray(p)?p:[]}}catch(a){console.error("加载账号列表失败:",a)}},D=()=>{u.value={platform:"",account_id:null},v.value=[],w()};return U(()=>{A(),w()}),(o,a)=>{const p=c("el-option"),k=c("el-select"),B=c("el-date-picker"),x=c("el-button"),r=c("el-card"),i=c("el-table-column"),R=c("el-tag"),z=c("el-table"),E=O("loading");return f(),V("div",G,[e(r,{shadow:"never"},{header:l(()=>[...a[3]||(a[3]=[t("div",{class:"card-header"},[t("h3",null,"数据中心")],-1)])]),default:l(()=>[t("div",H,[e(k,{modelValue:u.value.platform,"onUpdate:modelValue":a[0]||(a[0]=s=>u.value.platform=s),placeholder:"选择平台",clearable:"",style:{width:"150px","margin-right":"10px"}},{default:l(()=>[e(p,{label:"抖音",value:"douyin"}),e(p,{label:"快手",value:"kuaishou"}),e(p,{label:"小红书",value:"xiaohongshu"})]),_:1},8,["modelValue"]),e(k,{modelValue:u.value.account_id,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value.account_id=s),placeholder:"选择账号",clearable:"",filterable:"",style:{width:"200px","margin-right":"10px"}},{default:l(()=>[(f(!0),V(J,null,T(y.value,s=>(f(),C(p,{key:s.id,label:s.account_name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(B,{modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=s=>v.value=s),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"300px","margin-right":"10px"}},null,8,["modelValue"]),e(x,{type:"primary",onClick:w},{default:l(()=>[...a[4]||(a[4]=[b("查询",-1)])]),_:1}),e(x,{onClick:D},{default:l(()=>[...a[5]||(a[5]=[b("重置",-1)])]),_:1})]),t("div",K,[e(r,{class:"stat-card",shadow:"hover"},{default:l(()=>[a[6]||(a[6]=t("div",{class:"stat-label"},"授权账号",-1)),t("div",P,n(d.value.authorized_accounts||0),1)]),_:1}),e(r,{class:"stat-card",shadow:"hover"},{default:l(()=>[a[7]||(a[7]=t("div",{class:"stat-label"},"发布视频数",-1)),t("div",Q,n(d.value.published_videos||0),1)]),_:1}),e(r,{class:"stat-card",shadow:"hover"},{default:l(()=>[a[8]||(a[8]=t("div",{class:"stat-label"},"总粉丝数",-1)),t("div",W,n(d.value.total_followers||0),1)]),_:1}),e(r,{class:"stat-card",shadow:"hover"},{default:l(()=>[a[9]||(a[9]=t("div",{class:"stat-label"},"播放量",-1)),t("div",X,n(d.value.playbacks||0),1)]),_:1}),e(r,{class:"stat-card",shadow:"hover"},{default:l(()=>[a[10]||(a[10]=t("div",{class:"stat-label"},"点赞数",-1)),t("div",Y,n(d.value.likes||0),1)]),_:1}),e(r,{class:"stat-card",shadow:"hover"},{default:l(()=>[a[11]||(a[11]=t("div",{class:"stat-label"},"评论数",-1)),t("div",Z,n(d.value.comments||0),1)]),_:1}),e(r,{class:"stat-card",shadow:"hover"},{default:l(()=>[a[12]||(a[12]=t("div",{class:"stat-label"},"净增粉丝数",-1)),t("div",$,n(d.value.net_followers||0),1)]),_:1}),e(r,{class:"stat-card",shadow:"hover"},{default:l(()=>[a[13]||(a[13]=t("div",{class:"stat-label"},"分享数",-1)),t("div",aa,n(d.value.shares||0),1)]),_:1})]),e(r,{class:"account-ranking-card",shadow:"never",style:{"margin-top":"20px"}},{header:l(()=>[...a[14]||(a[14]=[t("div",{class:"card-header"},[t("h4",null,"账号数据明细")],-1)])]),default:l(()=>[j((f(),C(z,{data:g.value,style:{width:"100%"},stripe:""},{default:l(()=>[e(i,{prop:"account_name",label:"账号名称","min-width":"150","show-overflow-tooltip":""}),e(i,{prop:"platform",label:"平台",width:"100"},{default:l(s=>[e(R,{size:"small"},{default:l(()=>[b(n(s.row.platform),1)]),_:2},1024)]),_:1}),e(i,{prop:"published_videos",label:"发布视频数",sortable:"",width:"120",align:"center"}),e(i,{prop:"total_followers",label:"总粉丝数",sortable:"",width:"120",align:"center"}),e(i,{prop:"playbacks",label:"播放量",sortable:"",width:"120",align:"center"}),e(i,{prop:"likes",label:"点赞数",sortable:"",width:"120",align:"center"}),e(i,{prop:"comments",label:"评论数",sortable:"",width:"120",align:"center"}),e(i,{prop:"net_followers",label:"净增粉丝数",sortable:"",width:"120",align:"center"},{default:l(s=>[t("span",{class:q(s.row.net_followers>0?"text-success":s.row.net_followers<0?"text-danger":"")},n(s.row.net_followers>0?"+":"")+n(s.row.net_followers),3)]),_:1}),e(i,{prop:"shares",label:"分享数",sortable:"",width:"120",align:"center"})]),_:1},8,["data"])),[[E,m.value]])]),_:1}),e(r,{class:"chart-card",shadow:"never",style:{"margin-top":"20px"}},{header:l(()=>[...a[15]||(a[15]=[t("h4",null,"数据趋势",-1)])]),default:l(()=>[a[16]||(a[16]=t("div",{class:"chart-placeholder"},null,-1))]),_:1})]),_:1})])}}},oa=N(ea,[["__scopeId","data-v-f47b3048"]]);export{oa as default};
